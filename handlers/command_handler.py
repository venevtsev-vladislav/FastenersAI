"""
–û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ –¥–ª—è Telegram –±–æ—Ç–∞
"""

import logging
from telegram import Update
from telegram.ext import ContextTypes

logger = logging.getLogger(__name__)

async def handle_start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start"""
    try:
        user = update.effective_user
        logger.info(f"üöÄ –ü–æ–ª—É—á–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ /start –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {user.id} ({user.first_name}) - v2.1")
        
        welcome_message = f"""
–ü—Ä–∏–≤–µ—Ç, {user.first_name}! üëã

–Ø –±–æ—Ç –¥–ª—è –ø–æ–∏—Å–∫–∞ –∫—Ä–µ–ø–µ–∂–Ω—ã—Ö –¥–µ—Ç–∞–ª–µ–π. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –º–Ω–µ:
‚Ä¢ –¢–µ–∫—Å—Ç–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –Ω—É–∂–Ω–æ–π –¥–µ—Ç–∞–ª–∏
‚Ä¢ –ì–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
‚Ä¢ –§–æ—Ç–æ –¥–µ—Ç–∞–ª–∏
‚Ä¢ –ê—É–¥–∏–æ —Ñ–∞–π–ª

–ò —è –Ω–∞–π–¥—É –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –≤ –Ω–∞—à–µ–º –∫–∞—Ç–∞–ª–æ–≥–µ!

–ö–æ–º–∞–Ω–¥—ã:
/help - –ø–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É
/start - –Ω–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ
        """
        
        await update.message.reply_text(welcome_message.strip())
        logger.info(f"‚úÖ –û—Ç–≤–µ—Ç –Ω–∞ /start –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é {user.id}")
        
    except Exception as e:
        logger.error(f"‚ùå –û—à–∏–±–∫–∞ –≤ handle_start: {e}")
        try:
            await update.message.reply_text("‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∫–æ–º–∞–Ω–¥—ã /start")
        except:
            pass

async def handle_help(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /help"""
    help_message = """
üîß –ü–æ–º–æ—â—å –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –±–æ—Ç–∞

üìù –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –Ω—É–∂–Ω–æ–π –¥–µ—Ç–∞–ª–∏ —Ç–µ–∫—Å—Ç–æ–º
2. –ò–ª–∏ –∑–∞–ø–∏—à–∏—Ç–µ –≥–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
3. –ò–ª–∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ –¥–µ—Ç–∞–ª–∏
4. –ò–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã (Excel, PDF, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)

üí° –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤:
‚Ä¢ "–ù—É–∂–µ–Ω –±–æ–ª—Ç –ú8—Ö20 —Å —à–µ—Å—Ç–∏–≥—Ä–∞–Ω–Ω–æ–π –≥–æ–ª–æ–≤–∫–æ–π"
‚Ä¢ "–ò—â—É —Å–∞–º–æ—Ä–µ–∑ –ø–æ –¥–µ—Ä–µ–≤—É 4—Ö50"
‚Ä¢ "–ê–Ω–∫–µ—Ä –¥–ª—è –±–µ—Ç–æ–Ω–∞ –ú10"

üìÅ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤:
‚Ä¢ Excel —Ñ–∞–π–ª—ã (.xlsx, .xls) - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥
‚Ä¢ PDF —Ñ–∞–π–ª—ã - –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
‚Ä¢ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è - OCR –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
‚Ä¢ –ú–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å –¥–æ 3 —Ñ–∞–π–ª–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

üìä –†–µ–∑—É–ª—å—Ç–∞—Ç:
–ë–æ—Ç —Å–æ–∑–¥–∞—Å—Ç Excel —Ñ–∞–π–ª —Å –ø–æ–¥—Ö–æ–¥—è—â–∏–º–∏ –¥–µ—Ç–∞–ª—è–º–∏, –≤–∫–ª—é—á–∞—è:
‚Ä¢ –ê—Ä—Ç–∏–∫—É–ª (SKU)
‚Ä¢ –ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ
‚Ä¢ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤ —É–ø–∞–∫–æ–≤–∫–µ
‚Ä¢ –ò –¥—Ä—É–≥–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

‚ùì –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å
    """
    
    await update.message.reply_text(help_message.strip())
    logger.info(f"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {update.effective_user.id} –∑–∞–ø—Ä–æ—Å–∏–ª –ø–æ–º–æ—â—å")

