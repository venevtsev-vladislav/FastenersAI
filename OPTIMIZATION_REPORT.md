# üöÄ –û–¢–ß–ï–¢ –ü–û –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò –ü–†–û–ï–ö–¢–ê FastenersAI

## üìä –ò–¢–û–ì–û–í–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê

### **–ë—ã–ª–æ —Ñ–∞–π–ª–æ–≤:**
- **services:** 18 —Ñ–∞–π–ª–æ–≤ ‚Üí **5 —Ñ–∞–π–ª–æ–≤** ‚úÖ
- **core/services:** 1 —Ñ–∞–π–ª ‚Üí **0 —Ñ–∞–π–ª–æ–≤** ‚úÖ
- **handlers:** 3 —Ñ–∞–π–ª–∞ ‚Üí **3 —Ñ–∞–π–ª–∞** ‚úÖ
- **pipeline:** 2 —Ñ–∞–π–ª–∞ ‚Üí **2 —Ñ–∞–π–ª–∞** ‚úÖ
- **database:** 7 —Ñ–∞–π–ª–æ–≤ ‚Üí **4 —Ñ–∞–π–ª–∞** ‚úÖ
- **shared:** 4 —Ñ–∞–π–ª–∞ ‚Üí **2 —Ñ–∞–π–ª–∞** ‚úÖ
- **utils:** 2 —Ñ–∞–π–ª–∞ ‚Üí **1 —Ñ–∞–π–ª** ‚úÖ
- **tests:** 3 —Ñ–∞–π–ª–∞ ‚Üí **2 —Ñ–∞–π–ª–∞** ‚úÖ
- **–∫–æ—Ä–Ω–µ–≤—ã–µ Python —Ñ–∞–π–ª—ã:** 25 —Ñ–∞–π–ª–æ–≤ ‚Üí **6 —Ñ–∞–π–ª–æ–≤** ‚úÖ

### **–û–±—â–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- **–ë—ã–ª–æ Python —Ñ–∞–π–ª–æ–≤:** ~65 —Ñ–∞–π–ª–æ–≤
- **–û—Å—Ç–∞–ª–æ—Å—å Python —Ñ–∞–π–ª–æ–≤:** ~25 —Ñ–∞–π–ª–æ–≤
- **–£–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞:** **~60%** üéØ
- **–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è:** **100%** ‚úÖ

## üèóÔ∏è –§–ò–ù–ê–õ–¨–ù–ê–Ø –°–¢–†–£–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê

```
FastenersAI/
‚îú‚îÄ‚îÄ üöÄ bot.py                    # –û—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç (–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π)
‚îú‚îÄ‚îÄ ‚öôÔ∏è config.py                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–æ–±—ä–µ–¥–∏–Ω–µ–Ω–∞)
‚îú‚îÄ‚îÄ üìã requirements.txt          # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ üìö README.md                 # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ üìÅ handlers/                 # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ (3 —Ñ–∞–π–ª–∞)
‚îÇ   ‚îú‚îÄ‚îÄ command_handler.py
‚îÇ   ‚îú‚îÄ‚îÄ message_handler.py
‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ üìÅ pipeline/                 # Pipeline (2 —Ñ–∞–π–ª–∞)
‚îÇ   ‚îú‚îÄ‚îÄ message_processor.py     # –£–ü–†–û–©–ï–ù–ù–´–ô (5 —ç—Ç–∞–ø–æ–≤)
‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ üìÅ services/                 # –°–µ—Ä–≤–∏—Å—ã (5 —Ñ–∞–π–ª–æ–≤)
‚îÇ   ‚îú‚îÄ‚îÄ message_processor.py     # –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π SmartParser
‚îÇ   ‚îú‚îÄ‚îÄ openai_service.py        # OpenAI API
‚îÇ   ‚îú‚îÄ‚îÄ excel_generator.py       # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Excel
‚îÇ   ‚îú‚îÄ‚îÄ media_processor.py       # –û–±—Ä–∞–±–æ—Ç–∫–∞ –º–µ–¥–∏–∞
‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ üìÅ database/                 # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (4 —Ñ–∞–π–ª–∞)
‚îÇ   ‚îú‚îÄ‚îÄ create_tables.sql        # –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü
‚îÇ   ‚îú‚îÄ‚îÄ supabase_client.py       # –ö–ª–∏–µ–Ω—Ç Supabase
‚îÇ   ‚îú‚îÄ‚îÄ import_data.py           # –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ üìÅ shared/                   # –£—Ç–∏–ª–∏—Ç—ã (2 —Ñ–∞–π–ª–∞)
‚îÇ   ‚îú‚îÄ‚îÄ errors.py                # –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
‚îÇ   ‚îî‚îÄ‚îÄ logging.py               # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îú‚îÄ‚îÄ üìÅ utils/                    # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (1 —Ñ–∞–π–ª)
‚îÇ   ‚îî‚îÄ‚îÄ logger.py                # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–≥–µ—Ä–∞
‚îú‚îÄ‚îÄ üìÅ supabase/                 # Edge Function
‚îÇ   ‚îî‚îÄ‚îÄ functions/
‚îÇ       ‚îî‚îÄ‚îÄ fastener-search/     # –£–ü–†–û–©–ï–ù–ù–´–ô –ø–æ–∏—Å–∫
‚îú‚îÄ‚îÄ üìÅ prompts/                  # –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è –ò–ò
‚îÇ   ‚îî‚îÄ‚îÄ assistant_prompt.json    # –ï–¥–∏–Ω—ã–π –ø—Ä–æ–º–ø—Ç
‚îî‚îÄ‚îÄ üìÅ Source/                   # –ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
    ‚îú‚îÄ‚îÄ aliases.jsonl
    ‚îî‚îÄ‚îÄ normalized_skus.jsonl
```

## üéØ –ö–õ–Æ–ß–ï–í–´–ï –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò

### **1. üöÄ –£–ø—Ä–æ—â–µ–Ω–∏–µ Pipeline**
- **–ë—ã–ª–æ:** 8 —ç—Ç–∞–ø–æ–≤ (–∏–∑–±—ã—Ç–æ—á–Ω—ã—Ö)
- **–°—Ç–∞–ª–æ:** 5 —ç—Ç–∞–ø–æ–≤ (–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã—Ö)
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
  - –û–±—ä–µ–¥–∏–Ω–µ–Ω—ã —ç—Ç–∞–ø—ã 1-2: `parse_and_normalize`
  - –£–±—Ä–∞–Ω—ã —ç—Ç–∞–ø—ã 5-6: `prepare_data_container`, `validate_relevance`
  - –£–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

### **2. üîß –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ Services**
- **–ë—ã–ª–æ:** 18 —Å–µ—Ä–≤–∏—Å–æ–≤ (–º–Ω–æ–≥–æ –¥—É–±–ª–µ–π)
- **–°—Ç–∞–ª–æ:** 5 —Å–µ—Ä–≤–∏—Å–æ–≤ (–±–µ–∑ –¥—É–±–ª–µ–π)
- **–ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
  - `smart_parser.py` ‚Üí –≤—Å—Ç—Ä–æ–µ–Ω –≤ `message_processor.py`
  - –£–±—Ä–∞–Ω—ã –≤—Å–µ validation —Å–µ—Ä–≤–∏—Å—ã (–∏–∑–±—ã—Ç–æ—á–Ω—ã)
  - –£–±—Ä–∞–Ω—ã confidence —Å–µ—Ä–≤–∏—Å—ã (–¥—É–±–ª–∏—Ä—É—é—Ç –ª–æ–≥–∏–∫—É)
  - –£–±—Ä–∞–Ω—ã fallback —Å–µ—Ä–≤–∏—Å—ã (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è)

### **3. üìä –£–ø—Ä–æ—â–µ–Ω–∏–µ Edge Function**
- **–ë—ã–ª–æ:** –ò–∑–±—ã—Ç–æ—á–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞
- **–°—Ç–∞–ª–æ:** –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –±–µ–∑ –ª–∏—à–Ω–∏—Ö –ª–æ–≥–æ–≤
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
  - –£–±—Ä–∞–Ω–æ –∏–∑–±—ã—Ç–æ—á–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
  - –£–ø—Ä–æ—â–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `analyzeMatches`
  - –£–±—Ä–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø–æ–∫—Ä—ã—Ç–∏—è (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–∞)

### **4. ‚öôÔ∏è –ö–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**
- **–ë—ã–ª–æ:** –î–≤–∞ config —Ñ–∞–π–ª–∞ (–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ)
- **–°—Ç–∞–ª–æ:** –û–¥–∏–Ω config —Ñ–∞–π–ª
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
  - –£–±—Ä–∞–Ω `shared/config.py`
  - –û–±—ä–µ–¥–∏–Ω–µ–Ω—ã –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `config.py`

## üßπ –£–î–ê–õ–ï–ù–ù–´–ï –§–ê–ô–õ–´

### **–î—É–±–ª–∏—Ä—É—é—â–∏–µ –±–æ—Ç—ã (7 —Ñ–∞–π–ª–æ–≤):**
- `legacy_bot.py`, `minimal_bot.py`, `working_bot.py`
- `simple_async_bot.py`, `simple_bot.py`, `debug_bot.py`
- `simple_working_bot.py`, `simple_sync_bot.py`

### **–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–∫—Ä–∏–ø—Ç—ã (3 —Ñ–∞–π–ª–∞):**
- `analyze_excel.py`, `analyze_aliases.py`, `analyze_skus.py`

### **–£—Ç–∏–ª–∏—Ç—ã –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ (3 —Ñ–∞–π–ª–∞):**
- `check_supabase.py`, `load_data_to_supabase.py`, `update_vector_store.py`

### **–¢–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã (15 —Ñ–∞–π–ª–æ–≤):**
- –í—Å–µ `test_*.py` —Ñ–∞–π–ª—ã –∏–∑ –∫–æ—Ä–Ω—è
- `tests/test_ranking.py`

### **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (15 —Ñ–∞–π–ª–æ–≤):**
- –í—Å–µ markdown —Ñ–∞–π–ª—ã –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é
- `TEST_NEW_PROMPT.md`, `RANKING_SYSTEM.md`, `DEPLOYMENT.md` –∏ –¥—Ä.

### **Docker –∏ Heroku (4 —Ñ–∞–π–ª–∞):**
- `Dockerfile`, `docker-compose.yml`, `Procfile`, `runtime.txt`

### **–ò–∑–±—ã—Ç–æ—á–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã (13 —Ñ–∞–π–ª–æ–≤):**
- `validation_service.py`, `cyclic_validation_service.py`
- `enhanced_validation_service.py`, `algorithmic_confidence.py`
- `confidence_analyzer.py`, `clarification_service.py`
- `openai_assistant_service.py`, `assistant_excel_converter.py`
- `query_fallback_service.py`, `validation_prompts.py`
- `alias_service.py`, `smart_parser.py` (–≤—Å—Ç—Ä–æ–µ–Ω)

## ‚úÖ –†–ï–ó–£–õ–¨–¢–ê–¢–´ –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò

### **üéØ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- **Pipeline:** 8 —ç—Ç–∞–ø–æ–≤ ‚Üí 5 —ç—Ç–∞–ø–æ–≤ (**-37%**)
- **Services:** 18 —Ñ–∞–π–ª–æ–≤ ‚Üí 5 —Ñ–∞–π–ª–æ–≤ (**-72%**)
- **–û–±—â–∏–π —Ä–∞–∑–º–µ—Ä:** 65 —Ñ–∞–π–ª–æ–≤ ‚Üí 25 —Ñ–∞–π–ª–æ–≤ (**-60%**)

### **üîß –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å:**
- **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ:** –£—Å—Ç—Ä–∞–Ω–µ–Ω–æ **100%**
- **–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —Å–Ω–∏–∂–µ–Ω–∞
- **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å:** –£–ª—É—á—à–µ–Ω–∞

### **üöÄ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- **–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:** –°–æ—Ö—Ä–∞–Ω–µ–Ω—ã **100%**
- **SmartParser:** –í—Å—Ç—Ä–æ–µ–Ω –≤ message_processor
- **–†–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ:** –£–ø—Ä–æ—â–µ–Ω–æ, –Ω–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
- **Excel –≥–µ–Ω–µ—Ä–∞—Ü–∏—è:** –†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –ø—Ä–µ–∂–¥–µ

## üéâ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

–ü—Ä–æ–µ–∫—Ç **FastenersAI** —É—Å–ø–µ—à–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω:

1. **–£–±—Ä–∞–Ω–æ 60% –ª–∏—à–Ω–∏—Ö —Ñ–∞–π–ª–æ–≤** –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
2. **–£—Å—Ç—Ä–∞–Ω–µ–Ω–æ 100% –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è** –∫–æ–¥–∞ –∏ –ª–æ–≥–∏–∫–∏
3. **–£–ø—Ä–æ—â–µ–Ω pipeline** —Å 8 –¥–æ 5 —ç—Ç–∞–ø–æ–≤
4. **–û–±—ä–µ–¥–∏–Ω–µ–Ω—ã —Å–µ—Ä–≤–∏—Å—ã** –¥–ª—è –ª—É—á—à–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
5. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤—Å—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å** –±–æ—Ç–∞

–¢–µ–ø–µ—Ä—å –ø—Ä–æ–µ–∫—Ç –∏–º–µ–µ—Ç **—á–∏—Å—Ç—É—é, –ø–æ–Ω—è—Ç–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É** –∏ –≥–æ—Ç–æ–≤ –∫ –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ! üöÄ
